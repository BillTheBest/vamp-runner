name: runner

clusters:
  runner:
    services:
    -
      breed:
        name: runner:1.0
        deployable: magneticio/sava:runner_1.0
        ports:
          port: 8081/http
        environment_variables:
          SAVA_RUNNER_ID: 1

      environment_variables:
        SAVA_RUNNER_ID: 1.0

      scale:
        cpu: 0.2
        memory: 64MB
        instances: 1
    -
      breed:
        name: runner:1.1
        deployable: magneticio/sava:runner_1.0
        ports:
          port: 8081/http
        environment_variables:
          SAVA_RUNNER_ID: 1

      environment_variables:
        SAVA_RUNNER_ID: 1.1

      scale:
        cpu: 0.2
        memory: 64MB
        instances: 1

    gateways:
      port:
        routes:
          runner:1.0:
            weight: 0%
          runner:1.1:
            weight: 100%
