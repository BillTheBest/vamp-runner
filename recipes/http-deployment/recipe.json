{
  "name": "HTTP Deployment",
  "description": "Deploying single HTTP service.",
  "run": [
    {
      "description": "Deploy service.",
      "resource": "deploy.yml",
      "await": [
        "deployments:sava",
        "clusters:sava",
        "services:runner",
        "synchronization:deployed"
      ],
      "timeout": "long"
    },
    {
      "description": "Send request to service and validate response.",
      "resource": "workflow.yml",
      "await": [
        "workflows:sava-requester",
        "response:ok"
      ],
      "timeout": "long"
    }
  ],
  "cleanup": [
    {
      "description": "Undeploy service.",
      "resource": "undeploy.yml",
      "await": [
        "deployments:sava",
        "clusters:sava",
        "services:runner",
        "synchronization:undeployed"
      ],
      "timeout": "long"
    },
    {
      "description": "Unschedule workflow.",
      "resource": "workflow.yml",
      "await": [
        "workflows:sava-requester",
        "unscheduled"
      ],
      "timeout": "long"
    }
  ]
}
